source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
library(Rcpp)
library(inline)
src <- '
Rcpp::NumericVector xa(a);
Rcpp::NumericVector xb(b);
int n_xa = xa.size(), n_xb = xb.size();
Rcpp::NumericVector xab(n_xa + n_xb - 1);
for (int i = 0; i < n_xa; i++){
for (int j = 0; j < n_xb; j++){
xab[i + j] += xa[i] * xb[j];
}
}
return xab;
'
fun <- cxxfunction(signature(a = "numeric", b = "numeric"), src, plugin = "Rcpp")
fun(1:3, 1:4)
data
source('~/.active-rstudio-document', echo=TRUE)
library(Rcpp)
library(inline)
pwd()
setwd()
getwd()
monte_cpp = cppFunction(cpp_code)
source('~/.active-rstudio-document', echo=TRUE)
monte_cpp(100)
monte_cpp(10000)
monte_cpp(N)
monte_cpp(N)
N = 1000000
monte_cpp(N)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
library(benchmark)
library(rbenchmark)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
dat = fread("/Users/taku/Dropbox/works/rworks/AnalyzingBaseballData/pitchfx/2013.csv")
data = dat %>%
dplyr::select(pitch_type, type, count, pitcher_name) %>%
filter(pitch_type!="NA")
head(data)
data = dat %>%
dplyr::select(pitch_type, type, count, pitcher_name, sv_id) %>%
filter(pitch_type!="NA")
head(data)
data %>% dplyr::select(pitch_type) %>% unique
data %>% dplyr::select(pitch_type) %>% table()
fastball = c("FF", "FT")
data = data %>% mutate(FAST_FL = ifelse(pitch_type %in% fastball, "T", "F"))
data %>% head
data %>% head(10)
data %>% head(100)
data = dat %>%
dplyr::select(pitch_type, type, count, pitcher_name, sv_id) %>%
filter(pitch_type!="NA")
fastball = c("FF", "FT")
data_fast = data %>%
mutate(FAST_FL = ifelse(pitch_type %in% fastball, "T", "F")) %>%
mutate(month = substr(sv_id, 4,4)) %>%
filter(month >= 4)
data_fast %>% head
kuroda_data = data_fast %>% filter(pitcher_name == "Hiroki Kuroda")
kuroda_data
kuroda_data_count =
kuroda_data %>% group_by(count) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F"))
kuroda_data_count
dat %>% select(pitch_type) %>% table
fastball = c("FF", "FT", "FC")
data_fast = data %>%
mutate(FAST_FL = ifelse(pitch_type %in% fastball, "T", "F")) %>%
mutate(month = substr(sv_id, 4,4)) %>%
filter(month >= 4)
kuroda_data = data_fast %>% filter(pitcher_name == "Hiroki Kuroda")
kuroda_data_count =
kuroda_data %>% group_by(count) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F"))
kuroda_data_count
fastball
fastball = c("FF", "FT", "FC", "FS")
data_fast = data %>%
mutate(FAST_FL = ifelse(pitch_type %in% fastball, "T", "F")) %>%
mutate(month = substr(sv_id, 4,4)) %>%
filter(month >= 4)
kuroda_data = data_fast %>% filter(pitcher_name == "Hiroki Kuroda")
kuroda_data_count =
kuroda_data %>% group_by(count) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F"))
kuroda_data_count
kuroda_data_count %>% melt(id.var = "count")
kuroda_data_count_melted =
kuroda_data_count %>% melt(id.var = "count") %>% setnames(c("count", "pitch", "freq"))
kuroda_data_count_melted
rPlot(data = kuroda_data_count_melted, freq ~ count, color = "pitch", type = "bar")
library(rCharts)
rPlot(data = kuroda_data_count_melted, freq ~ count, color = "pitch", type = "bar")
kuroda_data_count =
kuroda_data %>% group_by(count) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F"))%>%
mutate(fast_rate = fast / (fast+non_fast), non_fast_rate = non_fast / (fast+non_fast))
kuroda_data_count
kuroda_data_count =
kuroda_data %>% group_by(count) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F"))%>%
mutate(fast_rate = fast / (fast+non_fast), non_fast_rate = non_fast / (fast+non_fast)) %>%
dplyr::select(count, fast_rate, non_fast_rate) %>%
melt(id.var = "count") %>% setnames(c("count", "pitch", "freq"))
kuroda_data_count
rPlot(data = kuroda_data_count_melted, freq ~ count, color = "pitch", type = "bar")
rPlot(data = kuroda_data_count, freq ~ count, color = "pitch", type = "bar")
fast_rate = function(pitcher_name = "Hiroki Kuroda"){
data_count = data_fast %>%
filter(pitcher_name = pitcher_name) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F"))%>%
mutate(fast_rate = fast / (fast+non_fast), non_fast_rate = non_fast / (fast+non_fast)) %>%
dplyr::select(count, fast_rate, non_fast_rate) %>%
melt(id.var = "count") %>% setnames(c("count", "pitch", "freq"))
np = rPlot(data = data_count, freq ~ count, color = "pitch", type = "bar")
return(np)
}
fast_rate()
fast_rate = function(pitcher_name = "Hiroki Kuroda"){
data_count = data_fast %>%
filter(pitcher_name == pitcher_name) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F"))%>%
mutate(fast_rate = fast / (fast+non_fast), non_fast_rate = non_fast / (fast+non_fast)) %>%
dplyr::select(count, fast_rate, non_fast_rate) %>%
melt(id.var = "count") %>% setnames(c("count", "pitch", "freq"))
np = rPlot(data = data_count, freq ~ count, color = "pitch", type = "bar")
return(np)
}
fast_rate()
pitcher_name = "Hiroki Kuroda"
data_count = data_fast %>%
filter(pitcher_name == pitcher_name)
data_count
pitcher_name = "Hiroki Kuroda"
pitcher = "Hiroki Kuroda"
data_count = data_fast %>%
filter(pitcher_name == pitcher)
data_count
fast_rate = function(pitcher = "Hiroki Kuroda"){
data_count = data_fast %>%
filter(pitcher_name == pitcher) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F")) %>%
mutate(fast_rate = fast / (fast+non_fast), non_fast_rate = non_fast / (fast+non_fast)) %>%
dplyr::select(count, fast_rate, non_fast_rate) %>%
melt(id.var = "count") %>% setnames(c("count", "pitch", "freq"))
np = rPlot(data = data_count, freq ~ count, color = "pitch", type = "bar")
return(np)
}
fast_rate()
fast_rate = function(pitcher = "Hiroki Kuroda"){
data_count = data_fast %>%
filter(pitcher_name == pitcher) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F")) %>%
mutate(fast_rate = fast / (fast+non_fast), non_fast_rate = non_fast / (fast+non_fast)) %>%
dplyr::select(count, fast_rate, non_fast_rate) %>%
melt(id.var = "count") %>% setnames(c("count", "pitch", "freq"))
np = rPlot(data = data_count, freq ~ count, color = "pitch", type = "bar")
np
return(np)
}
fast_rate()
data_count = data_fast %>%
filter(pitcher_name == pitcher) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F")) %>%
mutate(fast_rate = fast / (fast+non_fast), non_fast_rate = non_fast / (fast+non_fast))
data_count
data_count = data_fast %>%
filter(pitcher_name == pitcher) %>%
group_by(count) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F")) %>%
mutate(fast_rate = fast / (fast+non_fast), non_fast_rate = non_fast / (fast+non_fast))
data_count
fast_rate = function(pitcher = "Hiroki Kuroda"){
data_count = data_fast %>%
filter(pitcher_name == pitcher) %>%
group_by(count) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F")) %>%
mutate(fast_rate = fast / (fast+non_fast), non_fast_rate = non_fast / (fast+non_fast)) %>%
dplyr::select(count, fast_rate, non_fast_rate) %>%
melt(id.var = "count") %>% setnames(c("count", "pitch", "freq"))
np = rPlot(data = data_count, freq ~ count, color = "pitch", type = "bar")
np
return(np)
}
fast_rate()
fast_rate()
rPlot(data = kuroda_data_count, freq ~ count, color = "pitch", type = "bar")
hPlot(data = kuroda_data_count, freq ~ count, color = "pitch", type = "bar")
hPlot(data = kuroda_data_count, freq ~ count, color = "pitch", type = "multibar")
pitcher = "Hiroki Kuroda"
fast_rate = function(pitcher = "Hiroki Kuroda"){
data_count = data_fast %>%
filter(pitcher_name == pitcher) %>%
group_by(count) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F")) %>%
mutate(fast_rate = fast / (fast+non_fast), non_fast_rate = non_fast / (fast+non_fast)) %>%
dplyr::select(count, fast_rate, non_fast_rate) %>%
melt(id.var = "count") %>% setnames(c("count", "pitch", "freq"))
rp = rPlot(data = data_count, freq ~ count, color = "pitch", type = "bar")
rp
return(rp)
}
fast_rate()
rp = uPlot(data = data_count, freq ~ count, color = "pitch", type = "StackedBar")
rp = uPlot("count", "freq", data = data_count, group = "pitch", type = "StackedBar")
up = uPlot("freq","count", data = data_count, group = "pitch", type = "StackedBar")
np = nPlot(data = data_count, freq ~ count, color = "pitch", type = "discreteBarChart")
data_count = data_fast %>%
filter(pitcher_name == pitcher) %>%
group_by(count) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F")) %>%
mutate(fast_rate = fast / (fast+non_fast), non_fast_rate = non_fast / (fast+non_fast)) %>%
dplyr::select(count, fast_rate, non_fast_rate) %>%
melt(id.var = "count") %>% setnames(c("count", "pitch", "freq"))
rp = rPlot(data = data_count, freq ~ count, color = "pitch", type = "bar")
rp
np = nPlot(data = data_count, freq ~ count, color = "pitch", type = "discreteBarChart")
np
np
rp
fast_rate = function(pitcher = "Hiroki Kuroda"){
data_count = data_fast %>%
filter(pitcher_name == pitcher) %>%
group_by(count) %>%
dplyr::summarise(fast = sum(FAST_FL == "T"), non_fast = sum(FAST_FL == "F")) %>%
mutate(fast_rate = fast / (fast+non_fast), non_fast_rate = non_fast / (fast+non_fast)) %>%
dplyr::select(count, fast_rate, non_fast_rate) %>%
melt(id.var = "count") %>% setnames(c("count", "pitch", "freq"))
rp = rPlot(data = data_count, freq ~ count, color = "pitch", type = "bar")
return(rp)
}
fast_rate()
fast_rate("Yu Davish")
fast_rate("Yu Darvish")
dat = fread("/pitch_fx/2013.csv")
setwd("/Use")
setwd("/Users/ta")
setwd("/Users/taku/MLB_data/")
setwd("/Users/taku/MLB_data/rchart/")
getwd()
file = getwd() %>% gsub("/rchart", "")
file
file = getwd() %>% gsub("*/rchart", "")
file
file = getwd() %>% gsub
file = getwd()
file
dat = fread(paste(getwd(), "/pitch_fx/2013.csv", sep=""))
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
fast_rate("Hisashi Iwakuma")
